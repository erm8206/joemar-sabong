"use strict";(self.webpackChunksabong_app=self.webpackChunksabong_app||[]).push([[238],{1238:(z,p,d)=>{d.r(p),d.d(p,{LoaderModule:()=>x});var c=d(177),m=d(8333),u=d(467),e=d(4438),h=d(3366),f=d(1626),_=d(2326),l=d(4341);const b=()=>[5,10,20,50,100],v=()=>[];function F(o,s){if(1&o&&(e.j41(0,"option",30),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.Y8G("value",t),e.R7$(),e.JRh(t)}}function j(o,s){1&o&&(e.j41(0,"div",31),e.nrm(1,"div",32),e.k0s())}function k(o,s){1&o&&(e.j41(0,"div",31),e.nrm(1,"div",32),e.k0s())}function E(o,s){if(1&o&&(e.j41(0,"span"),e.EFF(1," You have sent "),e.j41(2,"span",35),e.EFF(3),e.k0s(),e.EFF(4),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(3),e.SpI("-",null==t?null:t.amount,""),e.R7$(),e.SpI(" to ",null==t||null==t.receiver?null:t.receiver.username," ")}}function C(o,s){if(1&o&&(e.j41(0,"span"),e.EFF(1," You have received "),e.j41(2,"span",36),e.EFF(3),e.k0s(),e.EFF(4),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(3),e.SpI("+",null==t?null:t.amount," "),e.R7$(),e.SpI(" from ",null==t||null==t.sender?null:t.sender.username," ")}}function y(o,s){if(1&o&&(e.j41(0,"span"),e.EFF(1," You have just withdrawn "),e.j41(2,"span",36),e.EFF(3),e.k0s(),e.EFF(4),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(3),e.SpI("+",null==t?null:t.amount," "),e.R7$(),e.SpI(" from ",null==t||null==t.sender?null:t.sender.username," ")}}function T(o,s){if(1&o&&(e.j41(0,"span"),e.EFF(1," You have been deducted worth "),e.j41(2,"span",35),e.EFF(3),e.k0s(),e.EFF(4),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(3),e.SpI("-",null==t?null:t.amount,""),e.R7$(),e.SpI(" by ",null==t||null==t.receiver?null:t.receiver.username," ")}}function L(o,s){if(1&o&&(e.j41(0,"span"),e.EFF(1," Converted "),e.j41(2,"span",35),e.EFF(3),e.k0s(),e.EFF(4," worth of commission to points "),e.k0s()),2&o){const t=e.XpG().$implicit;e.R7$(3),e.SpI("-",null==t?null:t.amount,"")}}function R(o,s){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.DNE(4,E,5,2,"span",27)(5,C,5,2,"span",27)(6,y,5,2,"span",27)(7,T,5,2,"span",27)(8,L,5,1,"span",27),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.nI1(17,"date"),e.k0s(),e.j41(18,"td"),e.EFF(19),e.k0s()()),2&o){const t=s.$implicit,a=s.index,n=e.XpG(2);e.R7$(2),e.JRh((n.pageNumber-1)*n.pageSize+a+1),e.R7$(2),e.Y8G("ngIf","manual cashin"==t.activity&&n.userLoggendin.username===t.sender.username),e.R7$(),e.Y8G("ngIf","manual cashin"==t.activity&&n.userLoggendin.username===t.receiver.username),e.R7$(),e.Y8G("ngIf","manual cashout"==t.activity&&n.userLoggendin.username===t.receiver.username),e.R7$(),e.Y8G("ngIf","manual cashout"==t.activity&&n.userLoggendin.username===t.sender.username),e.R7$(),e.Y8G("ngIf","convert commission"==t.activity),e.R7$(2),e.JRh(null==t||null==t.transactedBy?null:t.transactedBy.username),e.R7$(2),e.JRh(null==t?null:t.activity),e.R7$(2),e.JRh(null==t?null:t.remainingPoints),e.R7$(2),e.JRh(e.i5U(17,11,null==t?null:t.createdAt,"medium")),e.R7$(3),e.JRh(null==t?null:t.detail)}}function w(o,s){if(1&o&&(e.j41(0,"table",33)(1,"thead")(2,"tr")(3,"th"),e.EFF(4,"#"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Description"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Transacted By"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Activity"),e.k0s(),e.j41(11,"th"),e.EFF(12,"Remaining points"),e.k0s(),e.j41(13,"th"),e.EFF(14,"Created At"),e.k0s(),e.j41(15,"th"),e.EFF(16,"Remarks"),e.k0s()()(),e.j41(17,"tbody"),e.DNE(18,R,20,14,"tr",34),e.k0s()()),2&o){const t=e.XpG();e.R7$(18),e.Y8G("ngForOf",t.walletlogs)}}function S(o,s){1&o&&(e.j41(0,"div"),e.EFF(1," No record(s) found. "),e.k0s())}function I(o,s){if(1&o&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.E5c(" Showing ",(t.pageNumber-1)*t.pageSize+1," to ",t.getShowingRangeEnd()," of ",t.totalItems," entries ")}}function $(o,s){if(1&o&&(e.j41(0,"option",30),e.EFF(1),e.k0s()),2&o){const t=s.index;e.Y8G("value",t+1),e.R7$(),e.SpI(" Page ",t+1," ")}}function W(o,s){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",37)(2,"button",38),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.goToPage(n.pageNumber-1))}),e.EFF(3," Previous "),e.k0s(),e.j41(4,"select",39),e.bIt("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.goToPage(n))}),e.DNE(5,$,2,2,"option",18),e.k0s(),e.j41(6,"button",38),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.goToPage(n.pageNumber+1))}),e.EFF(7," Next "),e.k0s(),e.j41(8,"button",40),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.goToPage(n.totalPages))}),e.EFF(9," Last "),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.Y8G("disabled",1===t.pageNumber),e.R7$(2),e.Y8G("ngModel",t.pageNumber),e.R7$(),e.Y8G("ngForOf",e.lJ4(5,v).constructor(t.totalPages)),e.R7$(),e.Y8G("disabled",t.pageNumber===t.totalPages),e.R7$(2),e.Y8G("disabled",t.pageNumber===t.totalPages)}}let G=(()=>{class o{constructor(t,a,n){this._api=t,this.http=a,this._jwt=n,this.totalCount=0,this.pageNumber=1,this.pageSize=10,this.totalPages=0,this.totalItems=0,this.userLoggendin={},this.isLoading=!1,this.walletlogs=[],this._jwt.getDecodedToken().subscribe(r=>{this.userLoggendin.username=r?.username})}ngOnInit(){this.getWalletLogs(1)}getWalletLogs(t){var a=this;return(0,u.A)(function*(){a.isLoading=!0;try{const n=yield a._api.get("user",`/wallet-log?pageNumber=${t}&pageSize=${a.pageSize}`);a.walletlogs=n.records||[],a.totalCount=n.totalCount,a.pageNumber=n.pageNumber,a.pageSize=n.pageSize,a.totalPages=n.totalPages,a.totalItems=n.totalCount}catch(n){console.error("Error fetching data:",n)}finally{a.isLoading=!1}})()}onPageSizeChange(t){this.pageSize=+t.target.value,this.pageNumber=1,this.getWalletLogs(1)}goToPage(t){t>=1&&t<=this.totalPages&&this.getWalletLogs(t)}getShowingRangeEnd(){return Math.min(this.pageNumber*this.pageSize,this.totalItems)}static{this.\u0275fac=function(a){return new(a||o)(e.rXU(h.G),e.rXU(f.Qq),e.rXU(_.b))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-wallet-log"]],decls:43,vars:9,consts:[[1,"container-fluid"],[1,"page-title"],[1,"row"],[1,"col-sm-6"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","index.html"],[1,"stroke-icon"],["href","../assets/svg/icon-sprite.svg#stroke-home"],[1,"breadcrumb-item","active"],[1,"col-sm-12"],[1,"card"],[1,"card-header",2,"font-size","13px"],[1,"fa","fa-align-justify"],[1,"card-body"],[1,"row","mb-3"],[1,"col-md-6","text-end"],["id","pageSize",1,"form-select",3,"change","value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"input-group"],["type","text","placeholder","Search transactions...",1,"form-control"],[1,"input-group-text"],[1,"fa","fa-search"],["class","loading-container",4,"ngIf"],[1,"table-responsive"],["border","1","width","100%","cellpadding","8","class","table table-bordered table-hover",4,"ngIf"],[4,"ngIf"],[1,"card-footer"],[1,"pagination-footer"],[3,"value"],[1,"loading-container"],[1,"spinner"],["border","1","width","100%","cellpadding","8",1,"table","table-bordered","table-hover"],[4,"ngFor","ngForOf"],[2,"color","red","font-weight","bolder"],[2,"color","green","font-weight","bolder"],[1,"pagination-controls",2,"display","flex","align-items","center","gap","10px","flex-wrap","wrap"],[1,"btn","btn-sm","btn-outline-primary",3,"click","disabled"],[1,"form-select","form-select-sm",2,"width","auto",3,"ngModelChange","ngModel"],[1,"btn","btn-sm","btn-outline-secondary",3,"click","disabled"]],template:function(a,n){1&a&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),e.EFF(5,"Wallet Logs"),e.k0s()(),e.j41(6,"div",3)(7,"ol",4)(8,"li",5)(9,"a",6),e.qSk(),e.j41(10,"svg",7),e.nrm(11,"use",8),e.k0s()()(),e.joV(),e.j41(12,"li",5),e.EFF(13,"Transaction(s)"),e.k0s(),e.j41(14,"li",9),e.EFF(15,"Wallet Logs"),e.k0s()()()()()(),e.j41(16,"div",0)(17,"div",2)(18,"div",10)(19,"div",11)(20,"div",12),e.nrm(21,"i",13),e.EFF(22," WALLET TRANSACTION LOGS "),e.k0s(),e.j41(23,"div",14)(24,"div",15)(25,"div",16)(26,"div")(27,"select",17),e.bIt("change",function(i){return n.onPageSizeChange(i)}),e.DNE(28,F,2,2,"option",18),e.k0s()()(),e.j41(29,"div",19)(30,"div",20),e.nrm(31,"input",21),e.j41(32,"span",22),e.nrm(33,"i",23),e.k0s()()()(),e.DNE(34,j,2,0,"div",24),e.j41(35,"div",25),e.DNE(36,k,2,0,"div",24)(37,w,19,1,"table",26),e.k0s(),e.DNE(38,S,2,0,"div",27),e.k0s(),e.j41(39,"div",28)(40,"div",29),e.DNE(41,I,2,3,"div",27)(42,W,10,6,"div",27),e.k0s()()()()()()),2&a&&(e.R7$(27),e.Y8G("value",n.pageSize),e.R7$(),e.Y8G("ngForOf",e.lJ4(8,b)),e.R7$(6),e.Y8G("ngIf",n.isLoading),e.R7$(2),e.Y8G("ngIf",n.isLoading),e.R7$(),e.Y8G("ngIf",!n.isLoading&&n.walletlogs.length>0),e.R7$(),e.Y8G("ngIf",!n.isLoading&&0===n.walletlogs.length),e.R7$(3),e.Y8G("ngIf",!n.isLoading&&n.walletlogs.length>0),e.R7$(),e.Y8G("ngIf",n.totalPages>1))},dependencies:[c.Sq,c.bT,l.xH,l.y7,l.wz,l.BC,l.vS,c.vh]})}}return o})();var g=d(8937),N=d(919);const M=(o,s)=>({"bg-green":o,"bg-red":s}),Y=[{path:"wallet-station",component:(()=>{class o{constructor(t,a,n){this.config=t,this._api=a,this._userSub=n,this.users=[],this.model={},this.selectedUser=null,this.isLoading=!1,this.transactionType="",this.pageNumber=1,this.pageSize=10,this.totalItems=0,this.config.notFoundText="Downline not found"}getAllDownlines(){var t=this;return(0,u.A)(function*(){if(!t.isLoading){t.isLoading=!0;try{const a=yield t._api.get("user",`/downlines?pageNumber=${t.pageNumber}&pageSize=${t.pageSize}`);t.users=[...t.users,...a.records],t.totalItems=a.totalCount,t.pageNumber++}catch(a){console.error("Error loading downlines:",a)}finally{t.isLoading=!1}}})()}getDownlineDetails(){var t=this;return(0,u.A)(function*(){try{const a=yield t._api.get("user",`/${t.model.user}`);t.selectedUser=a}catch{}})()}selectTransaction(t){console.log(this.transactionType)}runTransaction(){this.transactionType?"deposit"==this.transactionType?this.load():this.withdraw():alert("Please select a transaction")}getAccount(){return this._userSub.getUserAccount()}load(){var t=this;return(0,u.A)(function*(){t.isLoading=!0;try{yield t._api.post("points",t.model,"/deposit"),t._userSub.getUserDetail(),alert("Success ! Points has been loaded"),t.isLoading=!1,t.clear()}catch(a){alert(a??"Server Error"),t.isLoading=!1}})()}clear(){this.model={},this.transactionType="",this.selectedUser={}}withdraw(){var t=this;return(0,u.A)(function*(){t.isLoading=!0;try{yield t._api.post("points",t.model,"/withdraw"),t._userSub.getUserDetail(),alert("Success ! Points has been withdrawn"),t.isLoading=!1,t.clear()}catch(a){alert(a??"Server Error"),t.isLoading=!1}})()}onScrollToEnd(){this.users.length<this.totalItems&&this.getAllDownlines()}dataModelChanged(t){console.log(t),t&&(this.model.user=t.id,this.getDownlineDetails())}ngOnInit(){this.getAllDownlines()}static{this.\u0275fac=function(a){return new(a||o)(e.rXU(g.Ci),e.rXU(h.G),e.rXU(N.q))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-walletstation"]],decls:74,vars:16,consts:[[1,"container-fluid"],[1,"page-title"],[1,"row"],[1,"col-sm-6"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","index.html"],[1,"stroke-icon"],["href","../assets/svg/icon-sprite.svg#stroke-home"],[1,"breadcrumb-item","active"],[1,"col-md-8","col-lg-8","col-xl-8"],[1,"card"],[1,"card-header","form-title"],["id","loading_form_body",1,"card-body",3,"ngClass"],[1,"form-group"],["for","company"],["id","transaction_type","required","required","name","transaction_type",1,"form-control",3,"ngModelChange","change","ngModel"],["selected","selected","value",""],["value","deposit"],["value","withdraw"],[1,"form-group","col-sm-6"],["id","loadUsernameLabel"],["name","users","bindLabel","username","bindValue","id",1,"custom-ng-select",3,"ngModelChange","change","scrollToEnd","ngModel","items","virtualScroll"],[1,"input-group"],["id","amount","placeholder","Enter Amount","required","required","name","amount","type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group","col-sm-12"],["for","details"],["placeholder","Enter Details","required","required","id","details","name","details","type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"card-footer"],["type","hidden","name","user_type",1,"user_type"],["type","hidden","name","token","value","ce97f7f38310da9337de50016e7f2bd32f1ada87a3619a139f0ac12a61c4b83c06910a"],["name","pre-submit",1,"btn","btn-success",3,"click","disabled"],[1,"fa","fa-check"],[1,"btn","btn-danger",2,"margin-left","10px",3,"click"],[1,"fa","fa-ban"],[1,"col-md-4"],["id","agent_username",2,"color","green","font-weight","bold"],[1,"card-body","bg-success"],["type","hidden","id","token","name","token","value","d585fff105ddf7bf81a18862e23c8651604fa768862554338573b684dbd11c6d6d72c3"],["id","agent_current_load",1,"text-value-lg",2,"padding-top","20px","padding-left","20px"],[2,"padding","20px"]],template:function(a,n){1&a&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),e.EFF(5,"Wallet Station"),e.k0s()(),e.j41(6,"div",3)(7,"ol",4)(8,"li",5)(9,"a",6),e.qSk(),e.j41(10,"svg",7),e.nrm(11,"use",8),e.k0s()()(),e.joV(),e.j41(12,"li",5),e.EFF(13,"Transactions"),e.k0s(),e.j41(14,"li",9),e.EFF(15,"Wallet Station"),e.k0s()()()()()(),e.j41(16,"div",0)(17,"div",2)(18,"div",10)(19,"div",11)(20,"div",12)(21,"strong")(22,"h4"),e.EFF(23,"Wallet Loading Station Form"),e.k0s()()(),e.j41(24,"div",13)(25,"div",14)(26,"label",15)(27,"strong"),e.EFF(28,"Transaction Type"),e.k0s()(),e.j41(29,"select",16),e.mxI("ngModelChange",function(i){return e.DH7(n.transactionType,i)||(n.transactionType=i),i}),e.bIt("change",function(i){return n.selectTransaction(i)}),e.j41(30,"option",17),e.EFF(31," Select a transaction type "),e.k0s(),e.j41(32,"option",18),e.EFF(33,"Deposit"),e.k0s(),e.j41(34,"option",19),e.EFF(35,"Withdraw"),e.k0s()()(),e.j41(36,"div",2)(37,"div",20)(38,"label")(39,"strong",21),e.EFF(40),e.k0s()(),e.j41(41,"ng-select",22),e.mxI("ngModelChange",function(i){return e.DH7(n.model.user,i)||(n.model.user=i),i}),e.bIt("change",function(i){return n.dataModelChanged(i)})("scrollToEnd",function(){return n.onScrollToEnd()}),e.k0s()(),e.j41(42,"div",20)(43,"label")(44,"strong"),e.EFF(45,"Amount"),e.k0s()(),e.j41(46,"div",23)(47,"input",24),e.mxI("ngModelChange",function(i){return e.DH7(n.model.amount,i)||(n.model.amount=i),i}),e.k0s()()()(),e.j41(48,"div",2)(49,"div",25)(50,"label",26)(51,"strong"),e.EFF(52,"Details"),e.k0s()(),e.j41(53,"input",27),e.mxI("ngModelChange",function(i){return e.DH7(n.model.details,i)||(n.model.details=i),i}),e.k0s()()()(),e.j41(54,"div",28),e.nrm(55,"input",29)(56,"input",30),e.j41(57,"button",31),e.bIt("click",function(){return n.runTransaction()}),e.nrm(58,"i",32),e.EFF(59," Submit Action "),e.k0s(),e.j41(60,"button",33),e.bIt("click",function(){return n.clear()}),e.nrm(61,"i",34),e.EFF(62," Cancel "),e.k0s()()()(),e.j41(63,"div",35),e.nrm(64,"h4",36),e.j41(65,"div",11)(66,"div",37),e.nrm(67,"input",38),e.j41(68,"h2")(69,"div",39),e.EFF(70),e.nI1(71,"number"),e.k0s()(),e.j41(72,"h5",40),e.EFF(73,"Current Wallet"),e.k0s()()()()()()),2&a&&(e.R7$(24),e.Y8G("ngClass",e.l_i(13,M,"deposit"==n.transactionType,"withdraw"==n.transactionType)),e.R7$(5),e.R50("ngModel",n.transactionType),e.R7$(11),e.SpI("Load ","withdraw"==n.transactionType?"From":"To",""),e.R7$(),e.R50("ngModel",n.model.user),e.Y8G("items",n.users)("virtualScroll",!0),e.R7$(6),e.R50("ngModel",n.model.amount),e.R7$(6),e.R50("ngModel",n.model.details),e.R7$(4),e.Y8G("disabled",n.isLoading),e.R7$(13),e.SpI(" ",e.i5U(71,10,null==n.selectedUser||null==n.selectedUser.account?null:n.selectedUser.account.points,"1.2")," "))},dependencies:[c.YU,g.vr,l.xH,l.y7,l.me,l.wz,l.BC,l.YS,l.vS,c.QX],styles:[".custom-ng-select .ng-select-container{background-color:#262932;border:1px solid #3b4658;border-radius:6px;font-size:16px;padding:5px 10px}  .custom-ng-select .ng-value{color:#fbfbfb}  .custom-ng-select .ng-dropdown-panel{border-radius:0 0 6px 6px;box-shadow:0 2px 8px #00000026}  .custom-ng-select .ng-option{padding:10px;font-size:15px}  .custom-ng-select .ng-option-selected{background-color:#007bff;color:#fff}  .ng-dropdown-panel .ng-dropdown-panel-items .ng-option{background-color:#121212!important}"]})}}return o})()},{path:"wallet-log",component:G}];let D=(()=>{class o{static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({imports:[m.iI.forChild(Y),m.iI]})}}return o})(),x=(()=>{class o{static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275mod=e.$C({type:o})}static{this.\u0275inj=e.G2t({providers:[c.vh],imports:[c.MD,g.MQ,l.YN,g.MQ,D]})}}return o})()}}]);