<div class="casino-wrapper">
    <!-- Loading Overlay -->
    <div class="loading-overlay" *ngIf="isLoading">
        <div class="spinner">
            <div class="bounce1"></div>
            <div class="bounce2"></div>
            <div class="bounce3"></div>
        </div>
    </div>

    <!-- Game Providers Section -->
    <div class="providers-container">
        <div class="providers-header">
            <div class="providers-title">
                <i class="fas fa-cube"></i>
                Game Providers
            </div>
        </div>

        <div class="providers-slider-container">
            <div class="providers-slider" #providersSlider (mousedown)="startDrag($event)" (mouseup)="endDrag()"
                (mouseleave)="endDrag()" (mousemove)="onDrag($event)" (touchstart)="onTouchStart($event)"
                (touchend)="onTouchEnd()" (touchmove)="onTouchMove($event)">
                <div class="provider-card" *ngFor="let provider of providers"
                    [class.active]="selectedProvider === provider.id" (click)="selectProvider(provider.id)">
                    <span class="provider-text" *ngIf="provider.id === 'all'">All</span>
                    <img *ngIf="provider.id !== 'all'" [src]="provider.logo" [alt]="provider.name" class="provider-logo"
                        onerror="this.src='assets/games/3coins.png'">
                </div>
            </div>
        </div>
    </div>

    <!-- Game Categories Section -->
    <div class="game-categories-container">
        <div class="category-links" #categoryLinks (mousedown)="startCategoryDrag($event)" (mouseup)="endCategoryDrag()"
            (mouseleave)="endCategoryDrag()" (mousemove)="onCategoryDrag($event)"
            (touchstart)="onCategoryTouchStart($event)" (touchend)="onCategoryTouchEnd()"
            (touchmove)="onCategoryTouchMove($event)">
            <a href="javascript:void(0)" class="category-item" [class.active]="selectedCategory === 'home'"
                (click)="selectCategory('home')">
                <i class="fas fa-home"></i>
                Home
            </a>
            <a href="javascript:void(0)" class="category-item" [class.active]="selectedCategory === 'hot'"
                (click)="selectCategory('hot')">
                <i class="fas fa-fire"></i>
                HOT
            </a>
            <a href="javascript:void(0)" class="category-item" [class.active]="selectedCategory === 'favorites'"
                (click)="selectCategory('favorites')">
                <i class="fas fa-heart"></i>
                Favorites
            </a>
            <a href="javascript:void(0)" class="category-item" [class.active]="selectedCategory === 'slots'"
                (click)="selectCategory('slots')">
                <i class="fas fa-dice"></i>
                Slots
            </a>
            <a href="javascript:void(0)" class="category-item" [class.active]="selectedCategory === 'casino'"
                (click)="selectCategory('casino')">
                <i class="fas fa-trophy"></i>
                Casino
            </a>
            <a href="javascript:void(0)" class="category-item" [class.active]="selectedCategory === 'poker'"
                (click)="selectCategory('poker')">
                <i class="fas fa-spade"></i>
                Poker
            </a>
            <a href="javascript:void(0)" class="category-item" [class.active]="selectedCategory === 'fishing'"
                (click)="selectCategory('fishing')">
                <i class="fas fa-fish"></i>
                Fishing
            </a>
            <a href="javascript:void(0)" class="category-item" [class.active]="selectedCategory === 'sports'"
                (click)="selectCategory('sports')">
                <i class="fas fa-futbol"></i>
                Sports
            </a>
        </div>
        <div class="search-container">
            <input type="search" placeholder="Search" class="search-input" (input)="onSearch($event)">
        </div>
    </div>

    <!-- Hot Games Section -->
    <div class="section-container" *ngIf="filteredGames.length > 0">
        <div class="section-header">
            <div class="title">
                <i class="fas fa-fire"></i>

                {{selectedCategory === 'home' ? 'Featured Games' : (selectedCategory | titlecase) + ' Games'}}
            </div>
            <div class="navigation-arrows">
                <button class="nav-arrow prev" (click)="scrollGamesLeft()">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="nav-arrow next" (click)="scrollGamesRight()">
                    <i class="fas fa-chevron-right"></i>
                </button>
                <button class="see-more" (click)="viewAllGames('category')">View All</button>
            </div>
        </div>

        <div class="games-scroll" #gameScroll (mousedown)="startGamesDrag($event)" (mouseup)="endGamesDrag()"
            (mouseleave)="endGamesDrag()" (mousemove)="onGamesDrag($event)" (touchstart)="onGamesTouchStart($event)"
            (touchend)="onGamesTouchEnd()" (touchmove)="onGamesTouchMove($event)">
            <div class="game-card" *ngFor="let game of filteredGames">
                <div class="game-image">
                    <img [src]="game.image" [alt]="game.name">
                    <div class="game-overlay">
                        <button class="play-now-btn" (click)="openGame(game.id)">Play Now</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- No Games Found Message -->
    <div class="no-games-message" *ngIf="filteredGames.length === 0">
        <i class="fas fa-search"></i>
        <p>No games found matching your search criteria</p>
    </div>

    <!-- Recently Played Section -->
    <div class="section-container" *ngIf="recentGames.length > 0">
        <div class="section-header">
            <div class="title">
                <i class="fas fa-clock"></i>
                Recently Played
            </div>
            <div class="navigation-arrows">
                <button class="nav-arrow prev" (click)="scrollRecentLeft()">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="nav-arrow next" (click)="scrollRecentRight()">
                    <i class="fas fa-chevron-right"></i>
                </button>
                <button class="see-more" (click)="viewAllGames('recent')">View All</button>
            </div>
        </div>

        <div class="games-scroll" #recentGamesScroll (mousedown)="startRecentDrag($event)" (mouseup)="endRecentDrag()"
            (mouseleave)="endRecentDrag()" (mousemove)="onRecentDrag($event)" (touchstart)="onRecentTouchStart($event)"
            (touchend)="onRecentTouchEnd()" (touchmove)="onRecentTouchMove($event)">
            <div class="game-card" *ngFor="let game of recentGames">
                <div class="game-image">
                    <img [src]="game.image" [alt]="game.name">
                    <div class="game-overlay">
                        <button class="play-now-btn" (click)="openGame(game.id)">Play Now</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Provider Games Section -->
    <div class="section-container" *ngIf="selectedProvider !== 'all'">
        <div class="section-header">
            <div class="title">
                <i class="fas fa-cube"></i>
                {{ getProviderName() }} Games
            </div>
            <div class="navigation-arrows">
                <button class="see-more" (click)="viewAllGames('provider')">View All Provider Games</button>
            </div>
        </div>
    </div>

    <!-- All Games Section -->
    <div class="section-container all-games-section">
        <div class="section-header">
            <div class="title">
                <i class="fas fa-gamepad"></i>
                All Casino Games
            </div>
        </div>

        <div class="games-grid limited-rows">
            <div class="game-card" *ngFor="let game of stakeOriginals.slice(0, 12)">
                <div class="game-image">
                    <img [src]="game.image" [alt]="game.name">
                    <div class="game-overlay">
                        <button class="play-now-btn" (click)="openGame(game.id)">Play Now</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="view-all-container">
            <button class="view-all-btn" (click)="viewAllGames('all')">View All Games</button>
        </div>
    </div>
</div>