<div class="tap-top"><i data-feather="chevrons-up"></i></div>
<div class="page-wrapper compact-wrapper" id="pageWrapper">
    <!-- Page Header Start-->
    <div class="page-header">
        <div class="header-wrapper row m-0">
            <div class="header-logo-wrapper col-auto p-0">
                <div class="logo-wrapper"><a routerLink="/player/home"><img class="img-fluid for-light"
                            src="assets/images/logo/logo.png" alt=""><img class="img-fluid for-dark"
                            src="assets/images/logo/logo_dark.png" alt=""></a></div>
                <div class="toggle-sidebar" (click)="toggleSidebar()"><i class="status_toggle middle sidebar-toggle"
                        data-feather="align-center"></i></div>
            </div>
            <div class="left-header col-xxl-5 col-xl-6 col-lg-5 col-md-4 col-sm-3 p-0">
                <!-- <div class="notification-slider">
                    <div class="d-flex h-100">
                        <img src="assets/images/giftools.gif" alt="gif">
                        <h6 class="mb-0 f-w-400">
                            <span class="font-primary">Place Your Bets Now! </span>
                            <span class="f-light">Live Sabong matches are happening today!</span>
                        </h6>
                        <i class="icon-arrow-top-right f-light"></i>
                    </div>
                    <div class="d-flex h-100">
                        <img src="assets/images/giftools.gif" alt="gif">
                        <h6 class="mb-0 f-w-400">
                            <span class="f-light">Jackpot Alert: </span> Tonight’s Lotto draw is at ₱50M!
                        </h6>
                        <a class="ms-1" href="/play-lotto" target="_blank">Play Now!</a>
                    </div>
                    <div class="d-flex h-100">
                        <img src="assets/images/giftools.gif" alt="gif">
                        <h6 class="mb-0 f-w-400">
                            <span class="font-primary">Bet Smart, Win Big! </span>
                            <span class="f-light">Join our live Baccarat tables and feel the thrill.</span>
                        </h6>
                        <a class="ms-1" href="/baccarat" target="_blank">Play Baccarat</a>
                    </div>
                </div> -->

                <div class="tether-box">
                    <span class="tether-amount">₱{{ (getAccount() | async)?.points | number : "1.2" }}</span>
                    <div class="tether-label">
                        <!-- <img src="https://cryptologos.cc/logos/tether-usdt-logo.png?v=029" alt="Tether"
                            class="tether-icon"> -->
                        <i class="fa-solid fa-wallet" style="font-size: 18px;"></i>

                    </div>
                </div>
            </div>

            <div class="nav-right col-xxl-7 col-xl-6 col-md-7 col-8 pull-right right-header p-0 ms-auto">

                <ul class="nav-menus">
                    <li>
                        <div class="tether-box wallet-mobile">
                            <span class="tether-amount">₱{{ (getAccount() | async)?.points | number : "1.2" }}</span>
                            <div class="tether-label">
                                <!-- <img src="https://cryptologos.cc/logos/tether-usdt-logo.png?v=029" alt="Tether"
                                    class="tether-icon"> -->
                                <i class="fa-solid fa-wallet" style="font-size: 18px;"></i>

                            </div>
                        </div>
                    </li>
                    <li class="fullscreen-body"> <span (click)="toggleFullscreen()">
                            <svg id="maximize-screen">
                                <use href="assets/svg/icon-sprite.svg#full-screen"></use>
                            </svg></span>
                    </li>
                    <li>
                        <div class="mode" (click)="toggleDarkMode()">
                            <svg>
                                <use href="assets/svg/icon-sprite.svg#moon"></use>
                            </svg>
                        </div>
                    </li>


                    <li class="profile-nav onhover-dropdown pe-0 py-0">
                        <div class="d-flex profile-media"><img class="b-r-10" src="assets/images/alex.png"
                                style="width: 35px; height: 35px;" alt="profile">
                            <div class="flex-grow-1"><span>{{ (getUserInfo() | async)?.username}}</span>
                                <p class="mb-0">{{ (getUserInfo() | async)?.type}} <i
                                        class="middle fa-solid fa-angle-down"></i></p>
                            </div>
                        </div>

                        <ul class="profile-dropdown onhover-show-div">
                            <li><a data-bs-toggle="modal" data-bs-target="#changePass"><i data-feather="log-in">
                                    </i><span>Change pass</span></a></li>
                            <li><a (click)="logout()"><i data-feather="log-in"> </i><span>Log out</span></a></li>
                        </ul>


                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!-- Page Body Start-->
    <div class="page-body-wrapper horizontal-menu">
        <!-- Page Sidebar Start-->
        <div class="sidebar-wrapper" data-sidebar-layout="stroke-svg">

            <div>
                <div class="logo-wrapper"><a routerLink="/player/home"><img class="img-fluid for-light"
                            src="assets/images/logo/logo.png" alt=""><img class="img-fluid for-dark"
                            src="assets/images/logo/logo_dark.png" alt=""></a>
                    <div class="back-btn"><i class="fa-solid fa-angle-left"></i></div>
                    <div class="toggle-sidebar" (click)="toggleSidebar()"><i class="status_toggle middle sidebar-toggle"
                            data-feather="grid"> </i>
                    </div>
                </div>
                <div class="logo-icon-wrapper"><a routerLink="/player/home"><img class="img-fluid"
                            src="assets/images/logo/logo-icon.png" alt=""></a></div>
                <nav class="sidebar-main">
                    <div class="left-arrow" id="left-arrow"><i data-feather="arrow-left"></i></div>
                    <div id="sidebar-menu">
                        <ul class="sidebar-links" id="simple-bar">
                            <li class="back-btn">
                                <div class="mobile-back text-end"><span>Back</span><i
                                        class="fa-solid fa-angle-right ps-2" aria-hidden="true"></i></div>
                            </li>
                            <li class="pin-title sidebar-main-title">
                                <div>
                                    <h6>Pinned</h6>
                                </div>
                            </li>
                            <li class="sidebar-main-title">
                                <div>
                                    <h6>Sabong</h6>
                                </div>
                            </li>
                            <li class="sidebar-list">
                                <i class="fa-solid fa-thumbtack"></i>
                                <a class="sidebar-link sidebar-title link-nav" routerLink="/player/home"
                                    routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
                                    <svg class="stroke-icon">
                                        <use href="assets/svg/icon-sprite.svg#stroke-home"></use>
                                    </svg>
                                    <svg class="fill-icon">
                                        <use href="assets/svg/icon-sprite.svg#fill-home"></use>
                                    </svg><span>Home</span>
                                </a>
                            </li>
                            <li class="sidebar-list">
                                <i class="fa-solid fa-thumbtack"></i>
                                <a class="sidebar-link sidebar-title link-nav" routerLink="/player/sabong-home"
                                    [queryParams]="{ tag: 'sabong' }" routerLinkActive="active"
                                    [routerLinkActiveOptions]="{ exact: true }">
                                    <svg class="stroke-icon">
                                        <use href="assets/svg/icon-sprite.svg#stroke-widget"></use>
                                    </svg>
                                    <svg class="fill-icon">
                                        <use href="assets/svg/icon-sprite.svg#fill-widget"></use>
                                    </svg><span>Sabong Section</span>
                                </a>
                            </li>
                            <li class="sidebar-list">
                                <i class="fa-solid fa-thumbtack"></i>
                                <a class="sidebar-link sidebar-title">
                                    <svg class="stroke-icon">
                                        <use href="assets/svg/icon-sprite.svg#stroke-reports"></use>
                                    </svg>
                                    <svg class="fill-icon">
                                        <use href="assets/svg/icon-sprite.svg#fill-reports"></use>
                                    </svg><span>History</span></a>
                                <ul class="sidebar-submenu">
                                    <li><a routerLink="/player/wallet-logs" routerLinkActive="active"
                                            [routerLinkActiveOptions]="{ exact: true }"><span>Wallet History</span></a>
                                    </li>
                                    <li><a routerLink="/player/bets-history" routerLinkActive="active"
                                            [routerLinkActiveOptions]="{ exact: true }"><span>Bet History</span></a>
                                    </li>
                                    <li><a routerLink="/player/cashin" routerLinkActive="active"
                                            [routerLinkActiveOptions]="{ exact: true }"><span>Cashin History</span></a>
                                    </li>
                                    <li><a routerLink="/player/cashout" routerLinkActive="active"
                                            [routerLinkActiveOptions]="{ exact: true }"><span>Cashout History</span></a>
                                    </li>
                                </ul>
                            </li>

                            <li class="sidebar-main-title">
                                <div>
                                    <h6>Casino (Coming Soon)</h6>
                                </div>
                            </li>

                            <li class="sidebar-list">
                                <i class="fa-solid fa-thumbtack"></i>
                                <a class="sidebar-link sidebar-title link-nav" routerLink="/player/casino-games"
                                    routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
                                    <svg class="stroke-icon">
                                        <use href="assets/svg/icon-sprite.svg#stroke-widget"></use>
                                    </svg>
                                    <svg class="fill-icon">
                                        <use href="assets/svg/icon-sprite.svg#fill-widget"></use>
                                    </svg><span>Casino</span>
                                </a>
                            </li>



                            <li class="sidebar-main-title">
                                <div>
                                    <h6>E-Lotto (Coming Soon)</h6>
                                </div>
                            </li>

                            <li class="sidebar-list">
                                <i class="fa-solid fa-thumbtack"></i>
                                <a class="sidebar-link sidebar-title">
                                    <svg class="stroke-icon">
                                        <use href="assets/svg/icon-sprite.svg#stroke-reports"></use>
                                    </svg>
                                    <svg class="fill-icon">
                                        <use href="assets/svg/icon-sprite.svg#fill-reports"></use>
                                    </svg><span>E-Lotto Games</span></a>
                                <ul class="sidebar-submenu">
                                    <!-- <li><a><span>Lotto</span></a>
                                    </li> -->
                                    <li>
                                        <i></i>
                                        <a routerLink="/player/list-2d" routerLinkActive="active"
                                            [routerLinkActiveOptions]="{ exact: true }">
                                            <span>2D Lotto</span>
                                        </a>
                                    </li>

                                    <li>
                                        <i></i>
                                        <a routerLink="/player/list-3d" routerLinkActive="active"
                                            [routerLinkActiveOptions]="{ exact: true }">
                                            <span>3D Lotto</span>
                                        </a>
                                    </li>

                                    <li>
                                        <i></i>
                                        <a routerLink="/player/list-pick3" routerLinkActive="active"
                                            [routerLinkActiveOptions]="{ exact: true }">
                                            <span>Pick3 Lotto</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>


                            <li class="sidebar-list">
                                <i class="fa-solid fa-thumbtack"></i>
                                <a class="sidebar-link sidebar-title">
                                    <svg class="stroke-icon">
                                        <use href="assets/svg/icon-sprite.svg#stroke-reports"></use>
                                    </svg>
                                    <svg class="fill-icon">
                                        <use href="assets/svg/icon-sprite.svg#fill-reports"></use>
                                    </svg><span>Bets and Receipts</span></a>
                                <ul class="sidebar-submenu">

                                    <li>
                                        <i></i>
                                        <a routerLink="/player/lotto-receipts" routerLinkActive="active"
                                            [routerLinkActiveOptions]="{ exact: true }">
                                            <span>Receipts</span>
                                        </a>
                                    </li>

                                    <li>
                                        <i></i>
                                        <a routerLink="/player/lotto-allbets" routerLinkActive="active"
                                            [routerLinkActiveOptions]="{ exact: true }">
                                            <span>All bets</span>
                                        </a>
                                    </li>


                                </ul>
                            </li>








                            <li class="sidebar-list">
                                <i class="fa-solid fa-thumbtack"></i>
                                <a class="sidebar-link sidebar-title link-nav" (click)="logout()"
                                    style="cursor: pointer">
                                    <svg class="stroke-icon">
                                        <use href="assets/svg/icon-sprite.svg#back-arrow"></use>
                                    </svg>
                                    <svg class="fill-icon">
                                        <use href="assets/svg/icon-sprite.svg#fill-task"></use>
                                    </svg><span>Logout</span>
                                </a>
                            </li>

                        </ul>
                    </div>
                    <div class="right-arrow" id="right-arrow"><i data-feather="arrow-right"></i></div>
                </nav>
            </div>
        </div>
        <!-- Page Sidebar Ends-->
        <div class="page-body" style="padding: 0px;">
            <div style="padding: 7px;background-color: rgb(40, 5, 100);margin: 0px;top: 9px;position: relative;">
                <marquee behavior="scroll" direction="left">{{model?.title}} <span data-bs-toggle="modal"
                        data-bs-target="#showMessageModal" style="color: aqua;"
                        (click)="showAnnouncementDetails(model?.id)">[read more..]</span>
                </marquee>
            </div>

            <router-outlet></router-outlet>

        </div>
        <!-- footer start-->
        <footer class="footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12 footer-copyright text-center">
                        <p class="mb-0">Copyright <span class="year-update"> </span> © Anteiku </p>
                    </div>
                </div>
            </div>
        </footer>
    </div>
</div>

<div class="modal fade" id="changePass" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Change Password</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    (click)="cancel()"><span aria-hidden="true"></span></button>
            </div>
            <div class="modal-body">
                <div class="alert alert-danger" role="alert" *ngIf="messageErrorTrue">
                    <div *ngFor="let item of message">
                        {{item}}
                    </div>
                </div>

                <div class="alert alert-success" role="alert" *ngIf="!messageErrorTrue && message.length > 0">

                    <div *ngFor="let item of message">
                        {{item}}
                    </div>
                </div>
                <div class="form-group">
                    <label for="input-2">Old Password</label>
                    <input [(ngModel)]="model.currentPassword" type="password" class="form-control"
                        style="color: #d2d2d2;" id="input-1" placeholder="Enter old password" required>
                </div>
                <div class="form-group">
                    <label for="input-2">New Password</label>
                    <input [(ngModel)]="model.newPassword" type="password" class="form-control" style="color: #d2d2d2;"
                        id="input-2" placeholder="Enter new password" required>
                </div>
                <div class="form-group">
                    <label for="input-2">Confirm New Password</label>
                    <input [(ngModel)]="model.confirmPassword" type="password" class="form-control"
                        style="color: #d2d2d2;" id="input-3" placeholder="Confirm New Password" required>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="cancel()">
                    Close
                </button>
                <button type="button" class="btn btn-success" (click)="changePassword()">
                    Save
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Message Modal -->
<!-- Message Modal -->
<!-- Elegant Message Modal -->
<!-- Elegant Message Modal -->
<div class="modal fade" id="showMessageModal" tabindex="-1" aria-labelledby="messageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content border-0 rounded-4 shadow-lg">

            <!-- Header -->
            <div class="modal-header bg-primary text-white rounded-top-4">
                <h5 class="modal-title d-flex align-items-center gap-2" id="messageModalLabel">
                    <i class="bi bi-envelope-paper-fill"></i> Announcements
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                    aria-label="Close"></button>
            </div>

            <!-- Body -->
            <div class="modal-body p-4">

                <!-- Single Message Preview -->
                <div class="card border-0 shadow rounded-4 p-3 " style="border-radius: 20px;
    background-color: #181818;" *ngIf="!showAll">
                    <div>
                        <h4 class="fw-semibold">{{ messageDetails?.title }}</h4>
                        <p class="text-secondary fs-6">{{ messageDetails?.body }}</p>

                        <div class="text-end mt-2">
                            <button class="btn btn-outline-primary btn-sm rounded-pill px-4" (click)="seeAllMessages()">
                                <i class="bi bi-list-ul me-1"></i> See All Messages
                            </button>
                        </div>
                    </div>
                </div>


                <!-- All Messages List -->
                <!-- All Messages List -->
                <div *ngIf="showAll">
                    <div class="card border-0 shadow rounded-4 p-3"
                        style="border-radius: 20px; background-color: #181818;">

                        <!-- Scrollable area starts here -->
                        <div class="card-body p-0" style="max-height: 400px; overflow-y: auto;"
                            (scroll)="onScroll($event)">
                            <div *ngIf="messages.length > 0; else noMessages">
                                <div *ngFor="let msg of messages" class="border-bottom py-3 px-3">
                                    <h5 class="fw-semibold text-primary mb-1">
                                        <i class="bi bi-bell-fill me-2 text-warning"></i>{{ msg.title }}
                                    </h5>
                                    <p class="text-secondary mb-2">{{ msg.body }}</p>
                                    <div class="text-end">
                                        <small class="text-muted">
                                            <i class="bi bi-clock me-1"></i>{{ msg.date | date:'short' }}
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <ng-template #noMessages>
                                <div class="alert alert-info text-center rounded-3 m-3">No messages available.</div>
                            </ng-template>
                        </div>
                        <!-- Scrollable area ends here -->

                    </div>
                    <div class="text-center py-2" *ngIf="isLoading">
                        <div class="spinner-border text-primary" role="status" style="width: 1.5rem; height: 1.5rem;">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>

                </div>

            </div>

            <!-- Footer -->
            <div class="modal-footer border-top-0 px-4 pb-4 pt-2">
                <button class="btn btn-secondary rounded-pill px-4" data-bs-dismiss="modal">
                    <i class="bi bi-x-circle me-1"></i> Close
                </button>
            </div>

        </div>
    </div>
</div>